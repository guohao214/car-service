webpackJsonp([31],{TeGx:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"\n.btnUploader {\n  width: 100%;\n  height: 3em;\n  background-color: green;\n  color: #fff;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.preview-img {\n  width: 100px;\n}\n.customWidth {\n  width: 850px;\n}\n.add_item {\n  width: 160px;\n  height: 40px;\n  margin-left: 20px;\n  margin-bottom: 20px;\n  display: inline-block;\n}\n.colorRow {\n  position: relative;\n}\n.colorBox {\n  width: 17px;\n  height: 17px;\n  display: inline-block;\n  border: solid 1px #ddd;\n  padding-top: 12px;\n  marign-left: 10px;\n  position: absolute;\n  top: 9px;\n  left: 60px;\n}\n",""])},WRrp:function(e,t,i){var a=i("TeGx");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("69a6a764",a,!0)},eHSO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),d=i.n(a),l=i("qqHy"),s=i.n(l),n={name:"uploaderEx",data:function(){return{action:this.$http.getBaseUrl()+"/index.php?m=home&c=brand&a=webUploadImage",files:[]}},props:["uploaderId","limit"],methods:{setFiles:function(e){this.files=e,this.showImagePreview()},imageChange:function(e){},beforeUpload:function(e){},uploadSuccess:function(e){var t=e.data,i=t.lastIndexOf("/"),a=t.substring(i+1);s()("#"+this.uploaderId).find("ul.el-upload-list li:last-child").append(s()("<img class='preview-img' src='"+t+"'/>")),this.files.push({name:a,url:t}),console.log(this.fileList)},imageRemove:function(e){this.files=this.files.filter(function(t){return t.url!==e.url})},showImagePreview:function(){var e=this;setTimeout(function(){s()("#"+e.uploaderId).find("li.el-upload-list__item").each(function(){var t=s()(this).attr("tabindex");if(void 0!=e.files[t]){var i=e.files[t].url;0==s()(this).find("img").length&&s()(this).append(s()("<img class='preview-img' src='"+i+"'/>"))}})},1e3)}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:e.uploaderId}},[i("el-upload",{ref:"uploaderId",staticClass:"upload-file",attrs:{action:e.action,accept:"image/jpeg,image/png,image/jpg","before-upload":e.beforeUpload,"on-success":e.uploadSuccess,"on-change":e.imageChange,"on-remove":e.imageRemove,limit:e.limit,"file-list":e.files,"auto-upload":!0}},[i("i",{staticClass:"el-icon-upload"})])],1)},staticRenderFns:[]},r={data:function(){return{isEditMode:!1,page:0,count:10,total:0,files:[],datalist:[],tableCol:[{name:"goods_name",width:500,label:"商品名称",add_disable:!1,edit_disable:!1,type:"input"},{name:"brand_id",width:500,label:"商品品牌",add_disable:!1,edit_disable:!1,type:"brand"},{name:"goods_title",width:500,label:"商品副标题",add_disable:!1,edit_disable:!1,type:"input"},{name:"goods_no",width:500,label:"商品货号",add_disable:!1,edit_disable:!1,type:"input"},{name:"goods_category",width:100,label:"商品分类",add_disable:!1,edit_disable:!1,type:"select"},{name:"sell_price",width:100,label:"商品价格",add_disable:!1,edit_disable:!1,type:"input"},{name:"group_price",width:100,label:"拼团价格",add_disable:!1,edit_disable:!1,type:"group_price"},{name:"market_price",width:100,label:"市场价格",add_disable:!1,edit_disable:!1,type:"input"},{name:"thumb",width:500,label:"商品图片",add_disable:!1,edit_disable:!1,type:"upload",limit:1},{name:"group_thumb",width:500,label:"拼团图片",add_disable:!1,edit_disable:!1,type:"upload",limit:1},{name:"upload_list_1",width:500,label:"车身外观相册",add_disable:!1,edit_disable:!1,type:"upload",limit:10},{name:"upload_list_2",width:500,label:"中控方向盘相册",add_disable:!1,edit_disable:!1,type:"upload",limit:10},{name:"upload_list_3",width:500,label:"车厢座椅相册",add_disable:!1,edit_disable:!1,type:"upload",limit:10},{name:"upload_list_4",width:500,label:"其他细节相册",add_disable:!1,edit_disable:!1,type:"upload",limit:10},{name:"goods_linventory",width:500,label:"商品库存",add_disable:!1,edit_disable:!1,type:"input"},{name:"car_type",width:500,label:"添加车型",add_disable:!1,edit_disable:!1,type:"input"},{name:"car_type_name",width:500,label:"车型名称",add_disable:!1,edit_disable:!1,type:"input"},{name:"msrp",width:500,label:"厂家指导价",add_disable:!1,edit_disable:!1,type:"input"},{name:"firm",width:500,label:"厂家",add_disable:!1,edit_disable:!1,type:"input"},{name:"grade",width:500,label:"级别",add_disable:!1,edit_disable:!1,type:"select"},{name:"energy",width:500,label:"能源类型",add_disable:!1,edit_disable:!1,type:"select"},{name:"year",width:500,label:"上市时间（年）",add_disable:!1,edit_disable:!1,type:"input"},{name:"month",width:500,label:"上市时间（月）",add_disable:!1,edit_disable:!1,type:"input"},{name:"engine",width:500,label:"发动机",add_disable:!1,edit_disable:!1,type:"input"},{name:"engine_no",width:500,label:"发动机型号",add_disable:!1,edit_disable:!1,type:"input"},{name:"displacement",width:500,label:"排量",add_disable:!1,edit_disable:!1,type:"input"},{name:"in_type",width:500,label:"进气形式",add_disable:!1,edit_disable:!1,type:"select"},{name:"arrangement_qi",width:500,label:"气缸排列形式",add_disable:!1,edit_disable:!1,type:"input"},{name:"qi_num",width:500,label:"气缸数量",add_disable:!1,edit_disable:!1,type:"input"},{name:"qi_door_num",width:500,label:"气缸门数",add_disable:!1,edit_disable:!1,type:"input"},{name:"reduce_ratio",width:500,label:"压缩比",add_disable:!1,edit_disable:!1,type:"input"},{name:"cylinder",width:500,label:"缸径",add_disable:!1,edit_disable:!1,type:"input"},{name:"distance",width:500,label:"行程",add_disable:!1,edit_disable:!1,type:"input"},{name:"max_hp",width:500,label:"最大马力",add_disable:!1,edit_disable:!1,type:"input"},{name:"max_power",width:500,label:"最大功率",add_disable:!1,edit_disable:!1,type:"input"},{name:"max_power_speed",width:500,label:"最大功率转速",add_disable:!1,edit_disable:!1,type:"input"},{name:"torque",width:500,label:"最大扭矩",add_disable:!1,edit_disable:!1,type:"input"},{name:"max_torque_speed",width:500,label:"最大扭矩转速",add_disable:!1,edit_disable:!1,type:"input"},{name:"engine_technology",width:500,label:"发动机特有技术",add_disable:!1,edit_disable:!1,type:"input"},{name:"fuel_form",width:500,label:"燃料形式",add_disable:!1,edit_disable:!1,type:"input"},{name:"supply_oil_type",width:500,label:"供油方式",add_disable:!1,edit_disable:!1,type:"input"},{name:"cylinder_head",width:500,label:"缸盖材料",add_disable:!1,edit_disable:!1,type:"input"},{name:"rohs",width:500,label:"环保标准",add_disable:!1,edit_disable:!1,type:"input"},{name:"gear_num",width:500,label:"档位个数",add_disable:!1,edit_disable:!1,type:"input"},{name:"gear_box_type",width:500,label:"变带箱类型",add_disable:!1,edit_disable:!1,type:"input"},{name:"shorter_form",width:500,label:"简称",add_disable:!1,edit_disable:!1,type:"input"},{name:"driving_method",width:500,label:"驱动方式",add_disable:!1,edit_disable:!1,type:"input"},{name:"four_drive_form",width:500,label:"四驱形式",add_disable:!1,edit_disable:!1,type:"input"},{name:"central_ifferential_structure",width:500,label:"中央差速器结构",add_disable:!1,edit_disable:!1,type:"input"},{name:"front_suspension_type",width:500,label:"前悬架类型",add_disable:!1,edit_disable:!1,type:"input"},{name:"rear_suspension_type",width:500,label:"后悬架类型",add_disable:!1,edit_disable:!1,type:"input"},{name:"help_type",width:500,label:"助力类型",add_disable:!1,edit_disable:!1,type:"input"},{name:"qi_structure",width:500,label:"车体结构",add_disable:!1,edit_disable:!1,type:"input"},{name:"front_brake",width:500,label:"前制动器类型",add_disable:!1,edit_disable:!1,type:"input"},{name:"input_rear_brake",width:500,label:"后制动器类型",add_disable:!1,edit_disable:!1,type:"input"},{name:"parking_brake_type",width:500,label:"驻车制动器类型",add_disable:!1,edit_disable:!1,type:"input"},{name:"front_tire_specification",width:500,label:"前轮胎规格",add_disable:!1,edit_disable:!1,type:"input"},{name:"rear_tire_specification",width:500,label:"后轮胎规格",add_disable:!1,edit_disable:!1,type:"input"},{name:"spare_tire_specification",width:500,label:"备胎规格",add_disable:!1,edit_disable:!1,type:"input"},{name:"color",width:500,label:"车辆颜色",add_disable:!1,edit_disable:!1,type:"color"}],groupDataList:[],groupTableCol:[{name:"count",width:150,label:"人数",add_disable:!1,edit_disable:!1,type:"input"},{name:"price",width:150,label:"价格（万元）",add_disable:!1,edit_disable:!1,type:"input"},{name:"start_time",width:150,label:"开始时间",add_disable:!1,edit_disable:!1,type:"input"},{name:"end_time",width:150,label:"结束时间",add_disable:!1,edit_disable:!1,type:"input"}],editFormVisible:!1,addFormVisible:!1,editForm:{},editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},editLoading:!1,addForm:{count:"",price:"",start_time:"",end_time:""},addFormRules:{},addLoading:!1,options:{grade:["微型车","小型车","紧凑型车","中型车","中大型车","大型车","小型SUV","紧凑型SUV","中型SUV","中大型SUV","大型SUV","MPV","跑车","皮卡","微面","轻客","微卡"],energy:["汽油","柴油","油电混合","电动"],in_type:["自然吸气","涡轮增压","双涡轮增压","机械增压和双增压"],goods_category:["商务车","平行进品车"],brand_id:[]},filter:{search:"",platform:"",device_type:"",type:"",is_force:"",work_type:""},ListLoading:!1,LaunchActivity:[],imgs:[],colors:[{name:1,cn_name:"红色",color:"#FF0000"},{name:2,cn_name:"黑色",color:"#000000"},{name:3,cn_name:"白色",color:"#FFFFFF"},{name:4,cn_name:"蓝色",color:"blue"}],selected_color:[]}},computed:{},mounted:function(){this.getEditInfo(),this.showDefaultImages(),this.getBrandInfo()},directives:{},methods:{selectChange:function(){this.$forceUpdate()},getBrandInfo:function(){var e=this;this.$http.postDataEx("brand","appBrandList",{},function(t){e.options.brand_id=t})},showDefaultImages:function(){this.$refs.upload_list_1[0].setFiles([])},initOptions:function(){for(var e in this.tableCol)"select"==this.tableCol[e].type&&(this.tableCol[e].options=this.options[this.tableCol[e].name])},getActivityList:function(){},getEditInfo:function(){var e=this,t=this.$route.query.id;void 0!==t?(this.isEditMode=!0,this.ListLoading=!0,this.$http.postDataEx("goods","webGoodsDetail",{goods_id:t},function(t){if(0==t.code){var i=t.data.basicInfo;e.groupDataList=[],e.tableCol.forEach(function(t){"input"!=t.type&&"select"!=t.type&&"brand"!=t.type||(e.editForm[t.name]=i[t.name]),void 0!==i.selected_color&&null!=i.selected_color||(i.selected_color=""),e.selected_color=i.selected_color.split(",");var a=i.thumb,d=e.getFileName(a);e.$refs.thumb[0].setFiles(""!=d?[{name:d,url:a}]:[]),a=i.group_thumb,d=e.getFileName(a),e.$refs.group_thumb[0].setFiles(""!=d?[{name:d,url:a}]:[]),e.$refs.upload_list_1[0].setFiles(e.getFileList(i.upload_list_1)),e.$refs.upload_list_2[0].setFiles(e.getFileList(i.upload_list_2)),e.$refs.upload_list_3[0].setFiles(e.getFileList(i.upload_list_3)),e.$refs.upload_list_4[0].setFiles(e.getFileList(i.upload_list_4))});var a=t.data.groupDataList;void 0!==a&&null!==a||(a=[]),a.forEach(function(t){e.groupDataList.push({count:t.count,price:t.price,start_time:t.start_time.substr(0,13),end_time:t.end_time.substr(0,13)})}),console.log(t.data),e.groupDataList=a}e.ListLoading=!1})):this.isEditMode=!1},getFileName:function(e){if(null==e||void 0===e)return"";var t=e.lastIndexOf("/");return e.substr(t+1)},getFileList:function(e){var t=this,i=JSON.parse(e);null==i&&(i=[]);var a=[];return i.forEach(function(e){a.push({name:t.getFileName(e),url:e})}),a},createSubmit:function(){var e=this;if(this.addLoading=!0,0==this.files.length)return this.$notify({title:"失败",message:"图片为空",type:"error"}),void(this.addFormVisible=!1);this.addForm.logo=this.files[0].url,this.$http.postDataEx("brand","webAddBrand",this.addForm,function(t){0==t.code&&(e.$notify({title:"成功",message:"新增成功",type:"success"}),e.files=[],e.getList(),e.addFormVisible=!1,e.initAddForm()),e.addLoading=!1})},addGroupItem:function(){this.groupDataList.push({count:this.addForm.count,price:this.addForm.price,start_time:this.addForm.start_time,end_time:this.addForm.end_time}),this.addForm.count="",this.addForm.price="",this.addForm.start_time="",this.addForm.end_time=""},deleteRow:function(e){this.groupDataList.splice(e,1)},submit:function(){var e=this,t={};this.tableCol.forEach(function(i){if("input"==i.type||"select"==i.type){var a=s()("#"+i.name).val();void 0!==a&&""!=a&&(t[i.name]=a)}if("brand"==i.type){var l=e.editForm.brand_id;void 0!==l&&""!=l&&(t[i.name]=l)}if("upload"==i.type)if(1==i.limit){if((o=s()("#"+i.name+"_uploader").find("img")).length>0){var n=o.eq(0).attr("src");t[i.name]=n}}else{var o,r=[];(o=s()("#"+i.name+"_uploader").find("img")).length>0&&(o.each(function(){var e=s()(this).attr("src");r.push(e)}),t[i.name]=d()(r))}}),console.log(t);var i=this,a="",l=this.$route.query.id;void 0===l?(a="webAddGoods",l=null,this.isEditMode=!1):(a="webEditGoods",this.isEditMode=!0);var n=[];this.groupDataList.forEach(function(e){var t=e.count,i=e.price,a="",d="";void 0!==e.start_time&&null!=e.start_time&&13==e.start_time.length&&(a=e.start_time+":00:00"),void 0!==e.end_time&&null!=e.end_time&&13==e.end_time.length&&(d=e.end_time+":00:00"),n.push({count:t,price:i,start_time:a,end_time:d})}),t.selected_color=this.selected_color.join(","),this.$http.postDataEx("goods",a,{basicInfo:t,groupDataList:n,goods_id:l},function(t){0==t.code&&(e.tableCol.forEach(function(t){"input"!=t.type&&"select"!=t.type&&"brand"!=t.type||(e.editForm[t.name]=""),e.$refs.thumb[0].setFiles([]),e.$refs.group_thumb[0].setFiles([]),e.$refs.upload_list_1[0].setFiles([]),e.$refs.upload_list_2[0].setFiles([]),e.$refs.upload_list_3[0].setFiles([]),e.$refs.upload_list_4[0].setFiles([]),e.groupDataList=[],e.selected_color=[]}),i.$notify({title:"成功",message:null==l?"添加成功":"修改成功",type:"success"}),s()("#tab-GoodsAdd").find(".el-icon-close").trigger("click"))})}},components:{UploaderEx:i("VU/8")(n,o,!1,null,null,null).exports},watch:{LaunchActivity:function(e,t){for(var i in this.LaunchActivity)this.options.launch_activity[this.LaunchActivity[i]]={value:this.LaunchActivity[i],label:this.LaunchActivity[i]}}},destoryed:function(){this.imgs=[]}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"brand",staticStyle:{height:"100%"}},[i("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[e._l(e.tableCol,function(t){return t.edit_disable?e._e():i("el-form-item",{key:t.id,attrs:{label:t.label,prop:t.name,"label-width":"150px"}},["input"===t.type?i("el-input",{attrs:{id:t.name,"auto-complete":"off",disabled:t.edit_disable},model:{value:e.editForm[t.name],callback:function(i){e.$set(e.editForm,t.name,i)},expression:"editForm[item.name]"}}):e._e(),e._v(" "),"select"===t.type?i("el-select",{attrs:{id:t.name,placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.editForm[t.name],callback:function(i){e.$set(e.editForm,t.name,i)},expression:"editForm[item.name]"}},e._l(e.options[t.name],function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})):e._e(),e._v(" "),"brand"===t.type?i("el-select",{attrs:{id:t.name,placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.editForm[t.name],callback:function(i){e.$set(e.editForm,t.name,i)},expression:"editForm[item.name]"}},e._l(e.options[t.name],function(e){return i("el-option",{key:e.big_brand_id,attrs:{label:e.cn_name,value:e.big_brand_id}})})):e._e(),e._v(" "),"upload"===t.type?i("uploaderEx",{ref:t.name,refInFor:!0,attrs:{uploaderId:t.name+"_uploader",limit:t.limit}}):e._e(),e._v(" "),"group_price"===t.type?i("div",[i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.addFormVisible=!0}}},[e._v("新增")]),e._v(" "),i("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:e.groupDataList}},e._l(e.groupTableCol,function(t){return i("el-table-column",{key:t.name,attrs:{prop:t.name,label:t.label,width:t.width},scopedSlots:e._u([{key:"default",fn:function(a){return["input"===t.type?i("span",{staticClass:"cell-edit-input"},[i("span",[e._v(e._s(a.row[t.name]?a.row[t.name]:"/"))])]):e._e()]}}])})}))],1):e._e(),e._v(" "),"color"===t.type?i("div",[i("el-checkbox-group",{model:{value:e.selected_color,callback:function(t){e.selected_color=t},expression:"selected_color"}},e._l(e.colors,function(t){return i("div",{staticClass:"colorRow"},[i("el-checkbox",{attrs:{label:t.cn_name}}),e._v(" "),i("div",{staticClass:"colorBox",style:"background-color:"+t.color})],1)}))],1):e._e()],1)}),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isEditMode,expression:"!isEditMode"}],staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("添加")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEditMode,expression:"isEditMode"}],staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("修改")])],2),e._v(" "),i("el-dialog",{attrs:{title:"新增",customClass:"customWidth",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[i("div",{staticClass:"add_item"},[i("el-input",{attrs:{placeholder:"人数",width:""},model:{value:e.addForm.count,callback:function(t){e.$set(e.addForm,"count",t)},expression:"addForm.count"}})],1),e._v(" "),i("div",{staticClass:"add_item"},[i("el-input",{attrs:{placeholder:"价格（万元）"},model:{value:e.addForm.price,callback:function(t){e.$set(e.addForm,"price",t)},expression:"addForm.price"}})],1),e._v(" "),i("div",{staticClass:"add_item"},[i("el-date-picker",{staticStyle:{width:"161px"},attrs:{type:"datetime",placeholder:"开始时间","value-format":"yyyy-MM-dd HH"},model:{value:e.addForm.start_time,callback:function(t){e.$set(e.addForm,"start_time",t)},expression:"addForm.start_time"}})],1),e._v(" "),i("div",{staticClass:"add_item"},[i("el-date-picker",{staticStyle:{width:"161px"},attrs:{type:"datetime",placeholder:"结束时间","value-format":"yyyy-MM-dd HH"},model:{value:e.addForm.end_time,callback:function(t){e.$set(e.addForm,"end_time",t)},expression:"addForm.end_time"}})],1),e._v(" "),i("div",{staticClass:"add_item"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addGroupItem}},[e._v("增加")])],1),e._v(" "),i("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[i("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:e.groupDataList}},[e._l(e.groupTableCol,function(t){return i("el-table-column",{key:t.name,attrs:{prop:t.name,label:t.label,width:t.width},scopedSlots:e._u([{key:"default",fn:function(a){return["input"===t.type?i("span",{staticClass:"cell-edit-input"},[i("span",[e._v(e._s(a.row[t.name]?a.row[t.name]:"/"))])]):e._e()]}}])})}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){i.preventDefault(),e.deleteRow(t.$index)}}},[e._v("删除")])]}}])})],2)],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(r,p,!1,function(e){i("WRrp")},null,null);t.default=u.exports}});